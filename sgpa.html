<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SGPA Calculator - Internal + External Marks</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #0a0f1c;
      --bg-secondary: #111827;
      --bg-card: #1f2937;
      --bg-input: #374151;
      --text-primary: #f9fafb;
      --text-secondary: #d1d5db;
      --text-muted: #9ca3af;
      --accent-primary: #3b82f6;
      --accent-secondary: #1d4ed8;
      --success: #10b981;
      --warning: #f59e0b;
      --error: #ef4444;
      --border: #374151;
      --border-light: #4b5563;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
      font-size: 14px;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 1rem;
      min-height: 100vh;
    }

    .header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .logo {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      border-radius: 12px;
      font-weight: 800;
      font-size: 18px;
      color: white;
      margin-bottom: 0.75rem;
      box-shadow: var(--shadow-lg);
    }

    .title {
      font-size: 2rem;
      font-weight: 800;
      margin-bottom: 0.5rem;
      background: linear-gradient(135deg, var(--text-primary), var(--accent-primary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      color: var(--text-secondary);
      font-size: 1rem;
      font-weight: 400;
    }

    .main-card {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 1.5rem;
      box-shadow: var(--shadow-xl);
      border: 1px solid var(--border);
      backdrop-filter: blur(10px);
    }

    .controls-section {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border);
      flex-wrap: wrap;
    }

    .control-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .control-label {
      font-weight: 600;
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    .control-input {
      background: var(--bg-input);
      border: 1px solid var(--border-light);
      border-radius: 12px;
      padding: 0.75rem 1rem;
      color: var(--text-primary);
      font-size: 1rem;
      transition: all 0.2s ease;
      font-family: inherit;
    }

    .control-input:focus {
      outline: none;
      border-color: var(--accent-primary);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .btn {
      background: var(--accent-primary);
      color: white;
      border: none;
      border-radius: 12px;
      padding: 0.75rem 1.5rem;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: inherit;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn:hover {
      background: var(--accent-secondary);
      transform: translateY(-1px);
      box-shadow: var(--shadow-md);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-secondary {
      background: transparent;
      border: 1px solid var(--border-light);
      color: var(--text-secondary);
    }

    .btn-secondary:hover {
      background: var(--bg-input);
      color: var(--text-primary);
    }

    .btn-danger {
      background: var(--error);
    }

    .btn-danger:hover {
      background: #dc2626;
    }

    .btn-group {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .subjects-container {
      margin-bottom: 2rem;
    }

    .subject-card {
      background: var(--bg-input);
      border-radius: 12px;
      padding: 1rem;
      border: 1px solid var(--border);
      margin-bottom: 0.75rem;
      transition: all 0.2s ease;
    }

    .subject-card:hover {
      border-color: var(--accent-primary);
      transform: translateX(4px);
    }

    .subject-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .subject-title {
      font-weight: 700;
      color: var(--accent-primary);
      font-size: 1.1rem;
    }

    .remove-btn {
      background: var(--error);
      color: white;
      border: none;
      border-radius: 8px;
      padding: 0.25rem 0.5rem;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .remove-btn:hover {
      background: #dc2626;
    }

    .input-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 0.75rem;
    }

    .input-group {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .input-label {
      font-size: 0.8rem;
      color: var(--text-muted);
      font-weight: 500;
    }

    .input-field {
      background: var(--bg-input);
      border: 1px solid var(--border-light);
      border-radius: 8px;
      padding: 0.5rem 0.75rem;
      color: var(--text-primary);
      font-size: 0.9rem;
      transition: all 0.2s ease;
      font-family: inherit;
    }

    .input-field:focus {
      outline: none;
      border-color: var(--accent-primary);
      box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
    }

    .input-field:read-only {
      background: var(--bg-card);
      color: var(--text-secondary);
      cursor: not-allowed;
    }

    .results-section {
      background: var(--bg-input);
      border-radius: 12px;
      padding: 1rem;
      border: 1px solid var(--border);
      margin-top: 1.5rem;
    }

    .result-item {
      margin-bottom: 1rem;
    }

    .result-item:last-child {
      margin-bottom: 0;
    }

    .result-label {
      font-size: 0.9rem;
      color: var(--text-muted);
      font-weight: 500;
      margin-bottom: 0.5rem;
    }

    .result-value {
      font-size: 1.5rem;
      font-weight: 800;
      color: var(--text-primary);
    }

    .result-value.success {
      color: var(--success);
    }

    .result-value.warning {
      color: var(--warning);
    }

    .result-value.error {
      color: var(--error);
    }

    .breakdown-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
      font-size: 0.85rem;
    }

    .breakdown-table th,
    .breakdown-table td {
      padding: 0.75rem;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    .breakdown-table th {
      font-weight: 600;
      color: var(--text-muted);
      background: var(--bg-card);
    }

    .breakdown-table td {
      color: var(--text-secondary);
    }

    .breakdown-table tr:hover {
      background: var(--bg-card);
    }

    .alert {
      padding: 1rem;
      border-radius: 12px;
      margin-bottom: 1rem;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .alert-info {
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid rgba(59, 130, 246, 0.2);
      color: var(--accent-primary);
    }

    .alert-warning {
      background: rgba(245, 158, 11, 0.1);
      border: 1px solid rgba(245, 158, 11, 0.2);
      color: var(--warning);
    }

    .alert-error {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.2);
      color: var(--error);
    }

    .hidden {
      display: none !important;
    }

    .progress-bar {
      width: 100%;
      height: 6px;
      background: var(--bg-input);
      border-radius: 3px;
      overflow: hidden;
      margin-top: 0.5rem;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
      border-radius: 3px;
      transition: width 0.3s ease;
      width: 0%;
    }

    .grade-indicator {
      display: flex;
      justify-content: space-between;
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 0.25rem;
    }

    .letter-grade {
      font-weight: 700;
      padding: 0.25rem 0.5rem;
      border-radius: 6px;
      font-size: 0.9rem;
      text-align: center;
      min-width: 30px;
    }

    .letter-grade.o { background: #10b981; color: white; }
    .letter-grade.a-plus { background: #3b82f6; color: white; }
    .letter-grade.a { background: #8b5cf6; color: white; }
    .letter-grade.b-plus { background: #f59e0b; color: white; }
    .letter-grade.b { background: #f97316; color: white; }
    .letter-grade.c { background: #ef4444; color: white; }
    .letter-grade.p { background: #6b7280; color: white; }
    .letter-grade.f { background: #dc2626; color: white; }

    .overall-grade {
      background: var(--bg-input);
      border-radius: 12px;
      padding: 1rem;
      border: 1px solid var(--border);
      margin-top: 1rem;
      text-align: center;
    }

    .overall-grade-label {
      font-size: 0.9rem;
      color: var(--text-muted);
      margin-bottom: 0.5rem;
    }

    .overall-grade-value {
      font-size: 2rem;
      font-weight: 800;
      margin-bottom: 0.25rem;
    }

    .overall-performance {
      font-size: 1rem;
      color: var(--text-secondary);
      font-weight: 500;
    }

    .fade-in {
      animation: fadeIn 0.3s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 768px) {
      .container {
        padding: 0.5rem;
      }
      
      .title {
        font-size: 1.5rem;
      }
      
      .subtitle {
        font-size: 0.9rem;
      }
      
      .main-card {
        padding: 1rem;
      }
      
      .controls-section {
        flex-direction: column;
      }
      
      .input-grid {
        grid-template-columns: 1fr;
        gap: 0.5rem;
      }
      
      .btn-group {
        flex-direction: column;
        gap: 0.5rem;
      }
      
      .btn {
        width: 100%;
        justify-content: center;
        padding: 0.5rem 1rem;
        font-size: 0.9rem;
      }
      
      .subject-card {
        padding: 0.75rem;
      }
      
      .result-value {
        font-size: 1.25rem;
      }
      
      .breakdown-table {
        font-size: 0.75rem;
      }
      
      .breakdown-table th,
      .breakdown-table td {
        padding: 0.5rem 0.25rem;
      }
      
      .letter-grade {
        font-size: 0.75rem;
        padding: 0.2rem 0.4rem;
        min-width: 25px;
      }
      
      .overall-grade-value {
        font-size: 1.5rem;
      }
    }
  </style>
  <script src="security.js"></script>
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="logo">SGPA</div>
      <h1 class="title">SGPA Calculator</h1>
      <p class="subtitle">Calculate SGPA from Internal + External Marks</p>
    </header>

    <div class="main-card">
      <div class="controls-section">
        <div class="btn-group">
          <button id="addSubject" class="btn">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
              <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
            </svg>
            Add Subject
          </button>
          <button id="calculate" class="btn btn-secondary">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
              <path d="M8 3a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5H6a.5.5 0 0 1 0-1h1.5V3.5A.5.5 0 0 1 8 3z"/>
              <path d="M3.732 1.732a.5.5 0 0 1 .707 0l1.414 1.414a.5.5 0 1 1-.707.707L3.732 2.439a.5.5 0 0 1 0-.707z"/>
              <path d="M12.268 1.732a.5.5 0 0 0-.707 0L10.146 3.146a.5.5 0 0 0 .707.707L12.268 2.439a.5.5 0 0 0 0-.707z"/>
              <path d="M8 13a.5.5 0 0 1 .5-.5v-2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1H9.5V12.5a.5.5 0 0 1-.5.5z"/>
              <path d="M3.732 12.268a.5.5 0 0 0 .707 0l1.414-1.414a.5.5 0 1 0-.707-.707L3.732 11.561a.5.5 0 0 0 0 .707z"/>
              <path d="M12.268 12.268a.5.5 0 0 1-.707 0L10.146 10.854a.5.5 0 0 1 .707-.707L12.268 11.561a.5.5 0 0 1 0 .707z"/>
            </svg>
            Calculate SGPA
          </button>
          <button id="reset" class="btn btn-danger">
            <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
              <path d="M8 3a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5H6a.5.5 0 0 1 0-1h1.5V3.5A.5.5 0 0 1 8 3z"/>
              <path d="M3.732 1.732a.5.5 0 0 1 .707 0l1.414 1.414a.5.5 0 1 1-.707.707L3.732 2.439a.5.5 0 0 1 0-.707z"/>
              <path d="M12.268 1.732a.5.5 0 0 0-.707 0L10.146 3.146a.5.5 0 0 0 .707.707L12.268 2.439a.5.5 0 0 0 0-.707z"/>
              <path d="M8 13a.5.5 0 0 1 .5-.5v-2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1H9.5V12.5a.5.5 0 0 1-.5.5z"/>
              <path d="M3.732 12.268a.5.5 0 0 0 .707 0l1.414-1.414a.5.5 0 1 0-.707-.707L3.732 11.561a.5.5 0 0 0 0 .707z"/>
              <path d="M12.268 12.268a.5.5 0 0 1-.707 0L10.146 10.854a.5.5 0 0 1 .707-.707L12.268 11.561a.5.5 0 0 1 0 .707z"/>
            </svg>
            Reset All
          </button>
        </div>
      </div>

      <div class="alert alert-info">
        <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
          <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
        </svg>
        <div>
          <strong>Mark Distribution:</strong> Internal 50 + External 50 = 100 total marks<br>
          <strong>Grading System:</strong> 91-100 (O), 81-90 (A+), 71-80 (A), 61-70 (B+), 51-60 (B), 41-50 (C), 40 (P), <40 (F)<br>
          <strong>Formula:</strong> SGPA = Total Grade Points รท Total Credits
        </div>
      </div>

      <div class="subjects-container" id="subjectsContainer">
        <!-- Subjects will be added here -->
      </div>

      <div class="results-section hidden" id="resultsSection">
        <div class="result-item">
          <div class="result-label">Total Credits</div>
          <div class="result-value" id="totalCredits">0</div>
        </div>

        <div class="result-item">
          <div class="result-label">Total Grade Points</div>
          <div class="result-value" id="totalGradePoints">0.00</div>
        </div>

        <div class="result-item">
          <div class="result-label">SGPA</div>
          <div class="result-value" id="sgpa">0.00</div>
          <div class="progress-bar">
            <div class="progress-fill" id="sgpaProgress"></div>
          </div>
          <div class="grade-indicator">
            <span>0.0</span>
            <span>5.0</span>
            <span>10.0</span>
          </div>
        </div>

        <div class="overall-grade hidden" id="overallGrade">
          <div class="overall-grade-label">Overall Grade</div>
          <div class="overall-grade-value" id="overallGradeValue">-</div>
          <div class="overall-performance" id="overallPerformance">-</div>
        </div>

        <table class="breakdown-table" id="breakdownTable">
          <thead>
            <tr>
              <th>Subject</th>
              <th>Internal</th>
              <th>External</th>
              <th>Total</th>
              <th>Letter Grade</th>
              <th>Performance</th>
              <th>Grade Point</th>
              <th>Credit</th>
              <th>Weighted Grade</th>
            </tr>
          </thead>
          <tbody id="breakdownBody"></tbody>
        </table>
      </div>
    </div>
  </div>

  <script>
    class SGPACalculator {
      constructor() {
        this.elements = {
          addSubject: document.getElementById('addSubject'),
          calculate: document.getElementById('calculate'),
          reset: document.getElementById('reset'),
          subjectsContainer: document.getElementById('subjectsContainer'),
          resultsSection: document.getElementById('resultsSection'),
          totalCredits: document.getElementById('totalCredits'),
          totalGradePoints: document.getElementById('totalGradePoints'),
          sgpa: document.getElementById('sgpa'),
          sgpaProgress: document.getElementById('sgpaProgress'),
          breakdownTable: document.getElementById('breakdownTable'),
          breakdownBody: document.getElementById('breakdownBody'),
          overallGrade: document.getElementById('overallGrade'),
          overallGradeValue: document.getElementById('overallGradeValue'),
          overallPerformance: document.getElementById('overallPerformance')
        };

        this.subjectCount = 0;
        this.init();
      }

      init() {
        this.bindEvents();
        this.addSubject(); // Start with one subject
      }

      bindEvents() {
        this.elements.addSubject.addEventListener('click', () => this.addSubject());
        this.elements.calculate.addEventListener('click', () => this.calculateSGPA());
        this.elements.reset.addEventListener('click', () => this.resetAll());
        
        // Real-time calculation
        this.elements.subjectsContainer.addEventListener('input', () => {
          this.calculateSGPA();
        });
      }

      addSubject() {
        this.subjectCount++;
        const card = document.createElement('div');
        card.className = 'subject-card fade-in';
        card.innerHTML = this.createSubjectHTML(this.subjectCount);
        this.elements.subjectsContainer.appendChild(card);
      }

      createSubjectHTML(subjectNumber) {
        return `
          <div class="subject-header">
            <div class="subject-title">Subject ${subjectNumber}</div>
            <button class="remove-btn" onclick="sgpaCalculator.removeSubject(this)">Remove</button>
          </div>
          <div class="input-grid">
            <div class="input-group">
              <label class="input-label">Internal Marks (out of 50)</label>
              <input type="number" class="input-field internal" min="0" max="50" placeholder="Enter internal marks">
            </div>
            <div class="input-group">
              <label class="input-label">External Marks (out of 50)</label>
              <input type="number" class="input-field external" min="0" max="50" placeholder="Enter external marks">
            </div>
            <div class="input-group">
              <label class="input-label">Credit</label>
              <input type="number" class="input-field credit" min="1" value="4" placeholder="Enter credit">
            </div>
            <div class="input-group">
              <label class="input-label">Total Marks</label>
              <input type="number" class="input-field total" readonly placeholder="Auto-calculated">
            </div>
          </div>
        `;
      }



      removeSubject(button) {
        const card = button.closest('.subject-card');
        card.remove();
        this.subjectCount--;
        this.updateSubjectNumbers();
      }

      updateSubjectNumbers() {
        const subjects = document.querySelectorAll('.subject-card');
        subjects.forEach((subject, index) => {
          const title = subject.querySelector('.subject-title');
          title.textContent = `Subject ${index + 1}`;
        });
      }

      getGradeInfo(totalMarks) {
        if (totalMarks >= 91) return { gradePoint: 10, letterGrade: 'O', performance: 'Outstanding' };
        if (totalMarks >= 81) return { gradePoint: 9, letterGrade: 'A+', performance: 'Excellent' };
        if (totalMarks >= 71) return { gradePoint: 8, letterGrade: 'A', performance: 'Very Good' };
        if (totalMarks >= 61) return { gradePoint: 7, letterGrade: 'B+', performance: 'Good' };
        if (totalMarks >= 51) return { gradePoint: 6, letterGrade: 'B', performance: 'Above Average' };
        if (totalMarks >= 41) return { gradePoint: 5, letterGrade: 'C', performance: 'Average' };
        if (totalMarks >= 40) return { gradePoint: 4, letterGrade: 'P', performance: 'Fair' };
        return { gradePoint: 0, letterGrade: 'F', performance: 'Fail' };
      }

      getGradePoint(totalMarks) {
        return this.getGradeInfo(totalMarks).gradePoint;
      }

      getGradeClass(letterGrade) {
        switch(letterGrade) {
          case 'O': return 'o';
          case 'A+': return 'a-plus';
          case 'A': return 'a';
          case 'B+': return 'b-plus';
          case 'B': return 'b';
          case 'C': return 'c';
          case 'P': return 'p';
          case 'F': return 'f';
          default: return 'f';
        }
      }

      calculateSGPA() {
        const subjects = document.querySelectorAll('.subject-card');
        let totalGradePoints = 0;
        let totalCredits = 0;
        const breakdown = [];

        subjects.forEach((subject, index) => {
          const internal = parseFloat(subject.querySelector('.internal').value) || 0;
          const external = parseFloat(subject.querySelector('.external').value) || 0;
          const credit = parseFloat(subject.querySelector('.credit').value) || 0;
          const total = internal + external;
          const gradeInfo = this.getGradeInfo(total);
          const weightedGrade = gradeInfo.gradePoint * credit;

          // Update total field
          subject.querySelector('.total').value = total;

          totalGradePoints += weightedGrade;
          totalCredits += credit;

          breakdown.push({
            subject: index + 1,
            internal,
            external,
            total,
            letterGrade: gradeInfo.letterGrade,
            performance: gradeInfo.performance,
            gradePoint: gradeInfo.gradePoint,
            credit,
            weightedGrade
          });
        });

        const sgpa = (totalCredits === 0) ? 0 : (totalGradePoints / totalCredits);

        this.updateResults(totalCredits, totalGradePoints, sgpa);
        this.updateBreakdown(breakdown);
        this.elements.resultsSection.classList.remove('hidden');
        this.elements.overallGrade.classList.remove('hidden');
      }

      updateResults(totalCredits, totalGradePoints, sgpa) {
        this.elements.totalCredits.textContent = totalCredits.toFixed(2);
        this.elements.totalGradePoints.textContent = totalGradePoints.toFixed(3);
        this.elements.sgpa.textContent = sgpa.toFixed(3);

        // Update SGPA color based on value
        this.elements.sgpa.className = 'result-value';
        if (sgpa >= 8.5) {
          this.elements.sgpa.classList.add('success');
        } else if (sgpa >= 7.0) {
          this.elements.sgpa.classList.add('warning');
        } else if (sgpa > 0) {
          this.elements.sgpa.classList.add('error');
        }

        // Update progress bar
        const progressPercentage = (sgpa / 10) * 100;
        this.elements.sgpaProgress.style.width = `${Math.min(100, progressPercentage)}%`;

        // Update overall grade
        const overallGradeInfo = this.getGradeInfo(sgpa * 10); // Convert SGPA to percentage scale
        this.elements.overallGradeValue.textContent = overallGradeInfo.letterGrade;
        this.elements.overallPerformance.textContent = overallGradeInfo.performance;
        
        // Update overall grade styling
        this.elements.overallGradeValue.className = `overall-grade-value letter-grade ${this.getGradeClass(overallGradeInfo.letterGrade)}`;
      }

      updateBreakdown(breakdown) {
        this.elements.breakdownBody.innerHTML = '';
        
        breakdown.forEach(row => {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>Subject ${row.subject}</td>
            <td>${row.internal}</td>
            <td>${row.external}</td>
            <td>${row.total}</td>
            <td><span class="letter-grade ${this.getGradeClass(row.letterGrade)}">${row.letterGrade}</span></td>
            <td>${row.performance}</td>
            <td>${row.gradePoint}</td>
            <td>${row.credit}</td>
            <td>${row.weightedGrade.toFixed(3)}</td>
          `;
          this.elements.breakdownBody.appendChild(tr);
        });
      }

      resetAll() {
        this.elements.subjectsContainer.innerHTML = '';
        this.elements.resultsSection.classList.add('hidden');
        this.elements.overallGrade.classList.add('hidden');
        this.subjectCount = 0;
        this.addSubject();
      }
    }

    // Initialize the calculator when the page loads
    let sgpaCalculator;
    document.addEventListener('DOMContentLoaded', () => {
      sgpaCalculator = new SGPACalculator();
    });
  </script>
</body>
</html>
